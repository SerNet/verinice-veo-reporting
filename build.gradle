plugins {
    id 'groovy'
    id 'application'
}

repositories {
    jcenter()
}

def versions = [
    groovy:'2.5.14'
]

dependencies {
    implementation "org.codehaus.groovy:groovy-json:$versions.groovy"
    implementation "org.codehaus.groovy:groovy-xml:$versions.groovy"
    implementation 'org.freemarker:freemarker:2.3.30'
    implementation 'com.vladsch.flexmark:flexmark-all:0.62.2'
    implementation 'org.codehaus.groovy.modules.http-builder:http-builder:0.7.2'
    implementation 'org.keycloak:keycloak-authz-client:11.0.3'

    testImplementation 'org.spockframework:spock-core:1.3-groovy-2.5'
}

configurations.all {
    resolutionStrategy.eachDependency { DependencyResolveDetails details ->
        if (details.requested.group == 'com.openhtmltopdf' && details.requested.version == '1.0.0' && details.requested.name != 'openhtmltopdf-jsoup-dom-converter') {
            details.useVersion '1.0.1'
            details.because 'fixes bookmark handling (https://github.com/danfickle/openhtmltopdf/issues/408)'
        }
    }
}

application {
    mainClassName = 'org.veo.templating.App'
}
